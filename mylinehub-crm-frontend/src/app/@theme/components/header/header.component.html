<div class="header-container">
  <div class="logo-container">
    <a (click)="toggleSidebar()" href="#" class="sidebar-toggle">
      <nb-icon icon="menu-2-outline" class="navigateicon"></nb-icon>
    </a>
  </div>

  <span class="logo" (click)="navigateHome()" *ngIf="!isWhite">
    <span class="company-logo-wrapper">
      <img src="../../../../assets/images/logo/logo-white.png" alt="Company Logo" class="company-logo-img" />
    </span>
  </span>

  <span class="logo" (click)="navigateHome()" *ngIf="isWhite">
    <span class="company-logo-wrapper">
      <img src="../../../../assets/images/logo/logo.png" alt="Company Logo" class="company-logo-img" />
    </span>
  </span>

</div>




<div class="header-container">

  
  <div class="notOnMobile">
  <div>
    <button outline  [status]="headerVariableService.isOnlineStatus" size = "small" shape="semi-round" [nbPopover]="phoneComponent" [nbPopoverPlacement]="position" [nbPopoverTrigger]="trigger"  [nbPopoverClass]="'custom-phone-popover'" nbButton><nb-icon [status]="headerVariableService.isOnlineStatus" icon="headphones" [options]="{ animation: { type: 'pulse', hover:'true', infinite:'true' } }"  [nbTooltip]="headerVariableService.browserphoneToolTip" nbTooltipPlacement="top" class="today-icon"></nb-icon></button>
     <!-- <span>&nbsp; &nbsp;<span *ngIf="!headerVariableService.callInProgress" style = "color: rgb(209, 78, 78); font-size: 0.5rem;">
      
      {{ headerVariableService.browserPhoneTitle }}
    
    </span></span> -->
    <span class="space">&nbsp; &nbsp;</span>
     <button outline [status]="headerVariableService.callStatus" size = "small" shape="semi-round"  [nbPopover]="receiveDialControlComponent" [nbPopoverPlacement]="position" [nbPopoverTrigger]="trigger"  [nbPopoverClass]="'custom-receive-call-popover'"  nbButton *ngIf="headerVariableService.callRinging && headerVariableService.callType=='Incoming-Call'"><nb-icon [status]="headerVariableService.callStatus" [icon]="headerVariableService.incomingIcon" [options]="{ animation: { type: 'pulse', hover:'true', infinite:'true' } }"  [nbTooltip]="headerVariableService.incomingToolTip" nbTooltipPlacement="top" class="today-icon"></nb-icon></button>
     <button outline [status]="headerVariableService.callStatus" size = "small" shape="semi-round"  [nbPopover]="receiveDialControlComponent" [nbPopoverPlacement]="position" [nbPopoverTrigger]="trigger"  [nbPopoverClass]="'custom-receive-call-popover'"  nbButton *ngIf="headerVariableService.callRinging && headerVariableService.callType!='Incoming-Call'"><nb-icon [status]="headerVariableService.callStatus" [icon]="headerVariableService.outgoingIcon" [options]="{ animation: { type: 'pulse', hover:'true', infinite:'true' } }"  [nbTooltip]="headerVariableService.outgoingToolTip" nbTooltipPlacement="top" class="today-icon"></nb-icon></button>

    <span class="space">&nbsp; &nbsp;</span>
    <button outline [status]="headerVariableService.callStatus"  size = "small" shape="semi-round" [nbPopover]="browserPhoneActionComponent" [nbPopoverPlacement]="position" [nbPopoverTrigger]="trigger"  [nbPopoverClass]="'custom-phone-action-popover'" nbButton *ngIf="headerVariableService.callInProgress"><nb-icon [status]="headerVariableService.callStatus" icon="phone-call" [options]="{ animation: { type: 'pulse', hover:'true', infinite:'true' } }"  [nbTooltip]="headerVariableService.browserPhoneActionToolTip" nbTooltipPlacement="top" class="today-icon"></nb-icon></button>
    
    <span class="space">&nbsp; &nbsp;</span>
    <button outline [status]="headerVariableService.callStatus" size = "small" nbButton shape="semi-round" (click)="openVideoDialog()" *ngIf="headerVariableService.isVideoCall || headerVariableService.isConference"><nb-icon [status]="headerVariableService.callStatus" [icon]="headerVariableService.videoIcon" [options]="{ animation: { type: 'pulse', hover:'true', infinite:'true' } }"   [nbTooltip]="headerVariableService.videoToolTip" nbTooltipPlacement="top" class="today-icon"></nb-icon></button>

    <span><audio id="remoteAudio"></audio></span>

  </div>
</div>

  &nbsp;&nbsp;&nbsp;&nbsp;
  
  <div class="themeSelectContainer">
    <nb-select class="themeSelect" [selected]="currentTheme" (selectedChange)="changeTheme($event)" status="primary">
      <nb-option *ngFor="let theme of themes" [value]="theme.value"> {{ theme.name }}</nb-option>
    </nb-select>
  </div>

  
  <div class="popover-container">
    <!-- <button nbButton ghost [nbPopover]="generalNotification" [nbPopoverPlacement]="position" [nbPopoverTrigger]="trigger" ><nb-icon icon="bell-outline"></nb-icon></button> -->
    <button nbButton ghost [nbPopover]="generalNotification" [nbPopoverPlacement]="position" [nbPopoverTrigger]="trigger" [nbPopoverClass]="'custom-notification-popover'">
     <nb-action icon="bell-outline" badgeStatus="danger" [badgeDot]="headerVariableService.notificationBadgeDot" badgePosition="top right">
     </nb-action> 
    </button>
  </div>
  
  <div class="popover-container">
    <button class="messagebox" nbButton ghost (click)="openMessageDialog()" >
      <!-- <nb-icon icon="email-outline"></nb-icon> -->
      <nb-action icon="email-outline" badgeStatus="danger" [badgeDot]="headerVariableService.messageBadgeDot" badgePosition="top right">
      </nb-action> 
    </button>
  </div>

  <nb-actions size="small">

    <nb-action class="control-item">
      <nb-search type="rotate-layout"></nb-search>
    </nb-action>
    <nb-action class="user-action" *nbIsGranted="['view', 'user']" >
      <nb-user [nbContextMenu]="userMenu"
               [onlyPicture]="userPictureOnly"
               [name]="user?.name"
               [picture]="user?.picture"
               nbContextMenuTag="my-context-menu"
               showInitials=true
               [color]="headerVariableService.userBackgroundColor">
      </nb-user>
    </nb-action>
  </nb-actions>
</div>
